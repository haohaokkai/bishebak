{"remainingRequest":"F:\\Myproject\\BISHE\\pro2.0\\project\\front\\node_modules\\babel-loader\\lib\\index.js!F:\\Myproject\\BISHE\\pro2.0\\project\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\Myproject\\BISHE\\pro2.0\\project\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Myproject\\BISHE\\pro2.0\\project\\front\\src\\views\\modules\\examrecord\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Myproject\\BISHE\\pro2.0\\project\\front\\src\\views\\modules\\examrecord\\list.vue","mtime":1743111777057},{"path":"F:\\Myproject\\BISHE\\pro2.0\\project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Myproject\\BISHE\\pro2.0\\project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\Myproject\\BISHE\\pro2.0\\project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Myproject\\BISHE\\pro2.0\\project\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RmxhZzogdHJ1ZSwKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBwYXBlcm5hbWU6ICcnCiAgICAgIH0sCiAgICAgIGRhdGFMaXN0OiBbXSwKICAgICAgcGFnZUluZGV4OiAxLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIHRvdGFsUGFnZTogMCwKICAgICAgZGF0YUxpc3RMb2FkaW5nOiBmYWxzZSwKICAgICAgZGV0YWlsc0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBjdXJyZW50UmVjb3JkOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluaVsOaNruWIl+ihqAogICAgZ2V0RGF0YUxpc3QoKSB7CiAgICAgIHRoaXMuZGF0YUxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2VJbmRleCwKICAgICAgICBsaW1pdDogdGhpcy5wYWdlU2l6ZSwKICAgICAgICBzb3J0OiAnaWQnLAogICAgICAgIGRvY3RvcklkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykgLy8g6I635Y+W5b2T5YmN55m75b2V5Yy755Sf55qESUQKICAgICAgfTsKICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybS51c2VybmFtZSkgewogICAgICAgIHBhcmFtc1sndXNlcm5hbWUnXSA9ICclJyArIHRoaXMuc2VhcmNoRm9ybS51c2VybmFtZSArICclJzsKICAgICAgfQogICAgICBpZiAodGhpcy5zZWFyY2hGb3JtLnBhcGVybmFtZSkgewogICAgICAgIHBhcmFtc1sncGFwZXJuYW1lJ10gPSAnJScgKyB0aGlzLnNlYXJjaEZvcm0ucGFwZXJuYW1lICsgJyUnOwogICAgICB9CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogJy9leGFtcmVjb3JkL2RvY3Rvci9saXN0JywKICAgICAgICAvLyDpnIDopoHlkI7nq6/mj5DkvpvmraTmjqXlj6MKICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgIH0pLnRoZW4oKHsKICAgICAgICBkYXRhCiAgICAgIH0pID0+IHsKICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBkYXRhLmRhdGEubGlzdDsKICAgICAgICAgIHRoaXMudG90YWxQYWdlID0gZGF0YS5kYXRhLnRvdGFsOwogICAgICAgIH0KICAgICAgICB0aGlzLmRhdGFMaXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmr4/pobXmlbAKICAgIHNpemVDaGFuZ2VIYW5kbGUodmFsKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgIHRoaXMucGFnZUluZGV4ID0gMTsKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgfSwKICAgIC8vIOW9k+WJjemhtQogICAgY3VycmVudENoYW5nZUhhbmRsZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlSW5kZXggPSB2YWw7CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICAvLyDmkJzntKIKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5wYWdlSW5kZXggPSAxOwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgLy8g5p+l55yL6K+m5oOFCiAgICB2aWV3RGV0YWlscyhyb3cpIHsKICAgICAgdGhpcy5jdXJyZW50UmVjb3JkID0gcm93OwogICAgICB0aGlzLmRldGFpbHNEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDkuIvovb3nrZTpopjor6bmg4UKICAgIGRvd25sb2FkRGV0YWlscyhyb3cpIHsKICAgICAgLy8g5Yib5bu65LiL6L295YaF5a65CiAgICAgIGxldCBjb250ZW50ID0gYOaCo+iAheetlOmimOivpuaDheaKpeWRilxuXG5gOwogICAgICBjb250ZW50ICs9IGDln7rmnKzkv6Hmga/vvJpcbmA7CiAgICAgIGNvbnRlbnQgKz0gYOaCo+iAheWnk+WQje+8miR7cm93LnVzZXJuYW1lfVxuYDsKICAgICAgY29udGVudCArPSBg5rWL6K+V5qih5p2/77yaJHtyb3cucGFwZXJuYW1lfVxuYDsKICAgICAgY29udGVudCArPSBg6K+V6aKY5ZCN56ew77yaJHtyb3cucXVlc3Rpb25uYW1lfVxuYDsKICAgICAgY29udGVudCArPSBg562U6aKY5pe26Ze077yaJHtyb3cuYWRkdGltZX1cblxuYDsKICAgICAgY29udGVudCArPSBg562U6aKY5oOF5Ya177yaXG5gOwogICAgICBjb250ZW50ICs9IGDpopjnm67liIblgLzvvJoke3Jvdy5zY29yZX1cbmA7CiAgICAgIGNvbnRlbnQgKz0gYOWunumZheW+l+WIhu+8miR7cm93Lm15c2NvcmV9XG5gOwogICAgICBjb250ZW50ICs9IGDmraPnoa7nrZTmoYjvvJoke3Jvdy5hbnN3ZXJ9XG5gOwogICAgICBjb250ZW50ICs9IGDogIPnlJ/nrZTmoYjvvJoke3Jvdy5teWFuc3dlcn1cblxuYDsKICAgICAgaWYgKHJvdy5hbmFseXNpcykgewogICAgICAgIGNvbnRlbnQgKz0gYOetlOahiOino+aekO+8mlxuJHtyb3cuYW5hbHlzaXMucmVwbGFjZSgvPFtePl0rPi9nLCAnJyl9XG5gOwogICAgICB9CgogICAgICAvLyDliJvlu7rlubbkuIvovb3mlofku7YKICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgewogICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnCiAgICAgIH0pOwogICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBsaW5rLmRvd25sb2FkID0gYCR7cm93LnVzZXJuYW1lfS3nrZTpopjor6bmg4UtJHtyb3cuYWRkdGltZX0udHh0YDsKICAgICAgbGluay5jbGljaygpOwogICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGxpbmsuaHJlZik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["data","showFlag","searchForm","username","papername","dataList","pageIndex","pageSize","totalPage","dataListLoading","detailsDialogVisible","currentRecord","created","getDataList","methods","params","page","limit","sort","doctorId","localStorage","getItem","$http","url","method","then","code","list","total","sizeChangeHandle","val","currentChangeHandle","search","viewDetails","row","downloadDetails","content","questionname","addtime","score","myscore","answer","myanswer","analysis","replace","blob","Blob","type","link","document","createElement","href","URL","createObjectURL","download","click","revokeObjectURL"],"sources":["src/views/modules/examrecord/list.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <!-- 列表页 -->\r\n    <div v-if=\"showFlag\">\r\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"form-content\">\r\n        <el-row :gutter=\"20\" class=\"slt\">\r\n          <el-form-item label=\"患者姓名\">\r\n            <el-input v-model=\"searchForm.username\" placeholder=\"患者姓名\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"测试模板\">\r\n            <el-input v-model=\"searchForm.papername\" placeholder=\"测试模板名称\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"search()\">查询</el-button>\r\n          </el-form-item>\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <div class=\"table-content\">\r\n        <el-table :data=\"dataList\" border v-loading=\"dataListLoading\" style=\"width: 100%\">\r\n          <el-table-column prop=\"username\" label=\"患者姓名\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"papername\" label=\"测试模板\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"questionname\" label=\"试题名称\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"score\" label=\"题目分值\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"myscore\" label=\"实际得分\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"addtime\" label=\"答题时间\" align=\"center\"></el-table-column>\r\n          <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" size=\"small\" @click=\"viewDetails(scope.row)\">查看详情</el-button>\r\n              <el-button type=\"text\" size=\"small\" @click=\"downloadDetails(scope.row)\">下载答题详情</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        \r\n        <el-pagination\r\n          @size-change=\"sizeChangeHandle\"\r\n          @current-change=\"currentChangeHandle\"\r\n          :current-page=\"pageIndex\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"pageSize\"\r\n          :total=\"totalPage\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n        ></el-pagination>\r\n      </div>\r\n\r\n      <!-- 查看详情对话框 -->\r\n      <el-dialog title=\"答题详情\" :visible.sync=\"detailsDialogVisible\" width=\"60%\">\r\n        <div v-if=\"currentRecord\">\r\n          <h3>基本信息</h3>\r\n          <el-descriptions :column=\"2\" border>\r\n            <el-descriptions-item label=\"患者姓名\">{{ currentRecord.username }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"测试模板\">{{ currentRecord.papername }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"试题名称\">{{ currentRecord.questionname }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"答题时间\">{{ currentRecord.addtime }}</el-descriptions-item>\r\n          </el-descriptions>\r\n          \r\n          <h3 style=\"margin-top: 20px\">答题情况</h3>\r\n          <el-descriptions :column=\"2\" border>\r\n            <el-descriptions-item label=\"题目分值\">{{ currentRecord.score }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"实际得分\">{{ currentRecord.myscore }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"正确答案\">{{ currentRecord.answer }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"考生答案\">{{ currentRecord.myanswer }}</el-descriptions-item>\r\n          </el-descriptions>\r\n\r\n          <div v-if=\"currentRecord.analysis\" style=\"margin-top: 20px\">\r\n            <h3>答案解析</h3>\r\n            <div v-html=\"currentRecord.analysis\"></div>\r\n          </div>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      showFlag: true,\r\n      searchForm: {\r\n        username: '',\r\n        papername: ''\r\n      },\r\n      dataList: [],\r\n      pageIndex: 1,\r\n      pageSize: 10,\r\n      totalPage: 0,\r\n      dataListLoading: false,\r\n      detailsDialogVisible: false,\r\n      currentRecord: null\r\n    }\r\n  },\r\n  created() {\r\n    this.getDataList()\r\n  },\r\n  methods: {\r\n    // 获取数据列表\r\n    getDataList() {\r\n      this.dataListLoading = true\r\n      let params = {\r\n        page: this.pageIndex,\r\n        limit: this.pageSize,\r\n        sort: 'id',\r\n        doctorId: localStorage.getItem('userId') // 获取当前登录医生的ID\r\n      }\r\n      if (this.searchForm.username) {\r\n        params['username'] = '%' + this.searchForm.username + '%'\r\n      }\r\n      if (this.searchForm.papername) {\r\n        params['papername'] = '%' + this.searchForm.papername + '%'\r\n      }\r\n      this.$http({\r\n        url: '/examrecord/doctor/list', // 需要后端提供此接口\r\n        method: 'get',\r\n        params: params\r\n      }).then(({ data }) => {\r\n        if (data && data.code === 0) {\r\n          this.dataList = data.data.list\r\n          this.totalPage = data.data.total\r\n        }\r\n        this.dataListLoading = false\r\n      })\r\n    },\r\n    // 每页数\r\n    sizeChangeHandle(val) {\r\n      this.pageSize = val\r\n      this.pageIndex = 1\r\n      this.getDataList()\r\n    },\r\n    // 当前页\r\n    currentChangeHandle(val) {\r\n      this.pageIndex = val\r\n      this.getDataList()\r\n    },\r\n    // 搜索\r\n    search() {\r\n      this.pageIndex = 1\r\n      this.getDataList()\r\n    },\r\n    // 查看详情\r\n    viewDetails(row) {\r\n      this.currentRecord = row\r\n      this.detailsDialogVisible = true\r\n    },\r\n    // 下载答题详情\r\n    downloadDetails(row) {\r\n      // 创建下载内容\r\n      let content = `患者答题详情报告\\n\\n`\r\n      content += `基本信息：\\n`\r\n      content += `患者姓名：${row.username}\\n`\r\n      content += `测试模板：${row.papername}\\n`\r\n      content += `试题名称：${row.questionname}\\n`\r\n      content += `答题时间：${row.addtime}\\n\\n`\r\n      content += `答题情况：\\n`\r\n      content += `题目分值：${row.score}\\n`\r\n      content += `实际得分：${row.myscore}\\n`\r\n      content += `正确答案：${row.answer}\\n`\r\n      content += `考生答案：${row.myanswer}\\n\\n`\r\n      if (row.analysis) {\r\n        content += `答案解析：\\n${row.analysis.replace(/<[^>]+>/g, '')}\\n`\r\n      }\r\n\r\n      // 创建并下载文件\r\n      const blob = new Blob([content], { type: 'text/plain;charset=utf-8' })\r\n      const link = document.createElement('a')\r\n      link.href = URL.createObjectURL(blob)\r\n      link.download = `${row.username}-答题详情-${row.addtime}.txt`\r\n      link.click()\r\n      URL.revokeObjectURL(link.href)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.form-content {\r\n  padding: 20px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n}\r\n.slt {\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.table-content {\r\n  margin-top: 20px;\r\n}\r\n.el-pagination {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n</style>\r\n"],"mappings":"AA2EA;EACAA,KAAA;IACA;MACAC,QAAA;MACAC,UAAA;QACAC,QAAA;QACAC,SAAA;MACA;MACAC,QAAA;MACAC,SAAA;MACAC,QAAA;MACAC,SAAA;MACAC,eAAA;MACAC,oBAAA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACA;IACAD,YAAA;MACA,KAAAJ,eAAA;MACA,IAAAM,MAAA;QACAC,IAAA,OAAAV,SAAA;QACAW,KAAA,OAAAV,QAAA;QACAW,IAAA;QACAC,QAAA,EAAAC,YAAA,CAAAC,OAAA;MACA;MACA,SAAAnB,UAAA,CAAAC,QAAA;QACAY,MAAA,0BAAAb,UAAA,CAAAC,QAAA;MACA;MACA,SAAAD,UAAA,CAAAE,SAAA;QACAW,MAAA,2BAAAb,UAAA,CAAAE,SAAA;MACA;MACA,KAAAkB,KAAA;QACAC,GAAA;QAAA;QACAC,MAAA;QACAT,MAAA,EAAAA;MACA,GAAAU,IAAA;QAAAzB;MAAA;QACA,IAAAA,IAAA,IAAAA,IAAA,CAAA0B,IAAA;UACA,KAAArB,QAAA,GAAAL,IAAA,CAAAA,IAAA,CAAA2B,IAAA;UACA,KAAAnB,SAAA,GAAAR,IAAA,CAAAA,IAAA,CAAA4B,KAAA;QACA;QACA,KAAAnB,eAAA;MACA;IACA;IACA;IACAoB,iBAAAC,GAAA;MACA,KAAAvB,QAAA,GAAAuB,GAAA;MACA,KAAAxB,SAAA;MACA,KAAAO,WAAA;IACA;IACA;IACAkB,oBAAAD,GAAA;MACA,KAAAxB,SAAA,GAAAwB,GAAA;MACA,KAAAjB,WAAA;IACA;IACA;IACAmB,OAAA;MACA,KAAA1B,SAAA;MACA,KAAAO,WAAA;IACA;IACA;IACAoB,YAAAC,GAAA;MACA,KAAAvB,aAAA,GAAAuB,GAAA;MACA,KAAAxB,oBAAA;IACA;IACA;IACAyB,gBAAAD,GAAA;MACA;MACA,IAAAE,OAAA;MACAA,OAAA;MACAA,OAAA,YAAAF,GAAA,CAAA/B,QAAA;MACAiC,OAAA,YAAAF,GAAA,CAAA9B,SAAA;MACAgC,OAAA,YAAAF,GAAA,CAAAG,YAAA;MACAD,OAAA,YAAAF,GAAA,CAAAI,OAAA;MACAF,OAAA;MACAA,OAAA,YAAAF,GAAA,CAAAK,KAAA;MACAH,OAAA,YAAAF,GAAA,CAAAM,OAAA;MACAJ,OAAA,YAAAF,GAAA,CAAAO,MAAA;MACAL,OAAA,YAAAF,GAAA,CAAAQ,QAAA;MACA,IAAAR,GAAA,CAAAS,QAAA;QACAP,OAAA,cAAAF,GAAA,CAAAS,QAAA,CAAAC,OAAA;MACA;;MAEA;MACA,MAAAC,IAAA,OAAAC,IAAA,EAAAV,OAAA;QAAAW,IAAA;MAAA;MACA,MAAAC,IAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,IAAA,CAAAG,IAAA,GAAAC,GAAA,CAAAC,eAAA,CAAAR,IAAA;MACAG,IAAA,CAAAM,QAAA,MAAApB,GAAA,CAAA/B,QAAA,SAAA+B,GAAA,CAAAI,OAAA;MACAU,IAAA,CAAAO,KAAA;MACAH,GAAA,CAAAI,eAAA,CAAAR,IAAA,CAAAG,IAAA;IACA;EACA;AACA","ignoreList":[]}]}