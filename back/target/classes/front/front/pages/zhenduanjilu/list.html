<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="utf-8">
<title>诊断记录</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="../../layui/css/layui.css">
<link rel="stylesheet" href="../../xznstatic/css/common.css"/>
<link rel="stylesheet" href="../../xznstatic/css/style.css"/>
<script type="text/javascript" src="../../xznstatic/js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="../../xznstatic/js/jquery.SuperSlide.2.1.1.js"></script>
</head>
<style>
	:root {
		--primary-color: #2C73D5;
		--secondary-color: #f5f7fa;
		--text-color: #333;
		--border-radius: 12px;
		--box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		--transition: all 0.3s ease;
	}

	.banner {
		position: relative;
		margin-bottom: -50px;
	}

	.banner::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 100px;
		background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.9));
	}

	.recommend {
		position: relative;
		z-index: 1;
		padding: 20px 0;
		background: var(--secondary-color);
	}

	.recommend .box {
		width: 1200px;
		margin: 0 auto;
		background: white;
		border-radius: var(--border-radius);
		box-shadow: var(--box-shadow);
		padding: 20px;
	}

	.recommend .box .title {
		padding: 15px 20px;
		background: white;
		border-radius: var(--border-radius);
		margin-bottom: 20px;
		box-shadow: var(--box-shadow);
	}

	.recommend .box .title span:first-child {
		font-size: 24px;
		font-weight: bold;
		color: var(--primary-color);
	}

	.recommend .box .filter {
		background: white;
		padding: 20px;
		border-radius: var(--border-radius);
		margin-bottom: 20px;
		box-shadow: var(--box-shadow);
	}

	.recommend .box .filter .item-list {
		margin-right: 20px;
	}

	.recommend .box .filter .item-list .lable {
		color: var(--text-color);
		font-weight: 500;
	}

	.recommend .box .filter .item-list input {
		border: 1px solid #e0e0e0;
		border-radius: 8px;
		padding: 8px 15px;
		transition: var(--transition);
	}

	.recommend .box .filter .item-list input:focus {
		border-color: var(--primary-color);
		box-shadow: 0 0 0 2px rgba(44, 115, 213, 0.1);
	}

	.recommend .box .filter button {
		background: var(--primary-color);
		color: white;
		border: none;
		border-radius: 8px;
		padding: 8px 20px;
		transition: var(--transition);
	}

	.recommend .box .filter button:hover {
		background: #1a5bb8;
		transform: translateY(-2px);
	}

	.list-item-body {
		background: white;
		border-radius: var(--border-radius);
		padding: 20px;
		margin-bottom: 20px;
		box-shadow: var(--box-shadow);
		transition: var(--transition);
	}

	.list-item-body:hover {
		transform: translateY(-5px);
		box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
	}

	.info {
		background: transparent;
	}

	.info p {
		margin: 10px 0;
		color: var(--text-color);
		font-size: 15px;
		line-height: 1.6;
	}

	.info span {
		color: var(--primary-color);
		font-weight: 500;
	}

	.detail-btn {
		text-align: right;
		margin-top: 15px;
	}

	.detail-btn button {
		background: var(--primary-color);
		color: white;
		border: none;
		border-radius: 8px;
		padding: 8px 20px;
		transition: var(--transition);
	}

	.detail-btn button:hover {
		background: #1a5bb8;
		transform: translateY(-2px);
	}

	.layui-laypage .layui-laypage-curr .layui-laypage-em {
		background-color: var(--primary-color);
	}

	@media screen and (max-width: 768px) {
		.recommend .box {
			width: 95%;
			padding: 10px;
		}

		.recommend .box .filter {
			flex-direction: column;
		}

		.recommend .box .filter .item-list {
			margin-bottom: 10px;
			width: 100%;
		}

		.recommend .box .filter .item-list input {
			width: 100%;
		}
	}
</style>
<body>
  <div id="app">
    <div class="banner">
      <div class="layui-carousel" id="test1" :style='{"boxShadow":"","margin":"0","borderColor":"rgba(255, 255, 255, 0.3)","borderRadius":"0","borderWidth":"0","width":"100%","borderStyle":"solid"}'>
      		  <div carousel-item>
      			<div v-for="(item,index) in swiperList" :key="index">
      				<img style="width: 100%;height: 100%;object-fit:cover;" :src="item.img" />
      			</div>
      		  </div>
      		</div>
    </div>
	<div class="recommend index-pv1" :style='{"padding":"10px 0 10px 0","boxShadow":"","margin":"10px 0 0 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(255, 0, 0, 0)","borderRadius":"0","borderWidth":"0","background":"#fff","borderStyle":"solid"}'>
		<div class="box" style='width:1200px'>
	    <div class="title" :style='{"padding":"10px 0 10px 0","boxShadow":"0 0 6px rgba(150, 183, 213,.8)","margin":"10px 0 10px 0","borderColor":"rgba(255, 255, 255, 0.56)","backgroundColor":"rgba(255, 255, 255, 1)","borderRadius":"4px","borderWidth":"6px","borderStyle":"ridge","justifyContent":"space-between","height":"54px"}'>
	      <span :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"rgba(255,0,0,1)","backgroundColor":"rgba(0, 0, 0, 0)","color":"rgba(0, 0, 0, 1)","borderRadius":"0 0 2px 0","borderWidth":"0","fontSize":"18px","borderStyle":"solid"}'>诊断记录</span><span :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"rgba(0,0,0,0)","backgroundColor":"rgba(0,0,0,0)","color":"rgba(0, 0, 0, 1)","borderRadius":"0","borderWidth":"0","fontSize":"14px","borderStyle":"solid"}'>您现在的位置：诊断记录</span>
	    </div>
		<form class="layui-form filter" :style='{"padding":"20px","boxShadow":"0 0 10px rgba(0,0,0,0.1)","margin":"0 0 20px 0","borderColor":"rgba(0,0,0,0.1)","backgroundColor":"#fff","borderRadius":"8px","borderWidth":"1px","borderStyle":"solid","justifyContent":"flex-start","height":"auto"}'>
			<div style="display: flex; align-items: center; justify-content: space-between;">
				<div class="item-list" style="display: flex; align-items: center;">
					<div class="lable" style="margin-right: 10px; font-weight: 500; color: #333;">医生姓名:</div>
					<input type="text" style="width: 160px; height: 36px; border-radius: 4px; border: 1px solid #e0e0e0; padding: 0 10px;" name="yishengxingming" id="yishengxingming" placeholder="请输入医生姓名" autocomplete="off" class="layui-input">
				</div>
				<div style="display: flex; align-items: center;">
					<button style="background: var(--primary-color); color: white; border: none; border-radius: 4px; padding: 0 20px; height: 36px; margin-right: 10px; cursor: pointer;" id="btn-search" type="button" class="layui-btn layui-btn-normal">
						<i class="layui-icon layui-icon-search"></i> 搜索
					</button>
					<button style="background: #f5f5f5; color: #333; border: 1px solid #ddd; border-radius: 4px; padding: 0 20px; height: 36px; cursor: pointer;" v-if="isAuth('zhenduanjilu','新增')" @click="jump('../zhenduanjilu/add.html')" type="button" class="layui-btn btn-theme">
						<i class="layui-icon">&#xe654;</i> 添加
					</button>
				</div>
			</div>
		</form>
			<!-- 样式一 -->
			<div class="list" style="position: relative;">
				<div v-for="(item,index) in dataList"
					 :key="index" class="list-item" :class="3=='3'?'list-item3':3=='5'?'list-item5':''">
					<div class="list-item-body animation-box"
						 :style='{
        "padding": "15px 20px",
        "boxShadow": "0 4px 10px rgba(0, 0, 0, 0.1)",
        "margin": "0 0 20px 0",
        "borderColor": "rgba(85, 122, 156, 0.8)",
        "backgroundColor": "rgba(255, 255, 255, 0.95)",
        "borderRadius": "12px",
        "borderWidth": "1px",
        "borderStyle": "hidden",
        "transition": "all 0.3s ease",
        "cursor": "pointer"
     }' @click="jump('../zhenduanjilu/detail.html?id='+item.id)">
						<div class="info">
							<p><span>医生姓名:</span>  {{item.yishengxingming}}</p>
							<p><span>用户姓名:</span>  {{item.yonghuxingming}}</p>
							<p><span>诊断内容:</span>  <a href="javascript:void(0)" @click.stop="viewContent(item.zhenduanneirong)">查看内容</a></p>
							<p><span>诊断时间:</span>  {{item.zhenduanshijian}}</p>
						</div>
					</div>
				</div>
			</div>
		<div class="pager" id="pager" :style="{textAlign:2==1?'left':2==2?'center':'right'}"></div>
	  </div>
	</div>


  </div>

  <script src="../../layui/layui.js"></script>
  <script src="../../js/vue.js"></script>
  <script src="../../js/config.js"></script>
  <script src="../../modules/config.js"></script>
  <script src="../../js/utils.js"></script>

  <script type="text/javascript">
	  var adminName = localStorage.getItem('adminName')
	  var vue = new Vue({
		  el: '#app',
		  data: {
			  swiperList: [],
			  dataList: [],
			  baseurl: '',
			  swiperIndex: '-1',

		  },
		  filters: {
			  newsDesc: function (val) {
				  if (val) {
					  if (val.length > 60) {
						  return val.substring(0, 60).replace(/<[^>]*>/g).replace(/undefined/g, '');
					  } else {
						  return val.replace(/<[^>]*>/g).replace(/undefined/g, '');
					  }
				  }
				  return '';
			  }
		  },
		  methods: {
			  isAuth(tablename, button) {
				  return isFrontAuth(tablename, button)
			  },
			  jump(url) {
				  jump(url)
			  },
        viewContent(url) {
          // 判断是否是图片文件
          if(url.match(/\.(jpg|jpeg|png|gif|bmp)$/i)) {
            window.open(vue.baseurl + url);
            return;
          }
          
          // 判断是否是文档文件
          if(url.match(/\.(doc|docx|pdf|txt)$/i)) {
            window.open(vue.baseurl + url);
            return;
          }

          // 如果是 HTML 内容，直接显示
          layer.alert(url, {
            title: '诊断内容',
            dangerouslyUseHTMLString: true,
            btn: ['确定']
          });
        }
		  }
	  });

    layui.use(['layer', 'element', 'carousel', 'laypage', 'http', 'jquery','laydate'], function() {
	var layer = layui.layer;
	var element = layui.element;
	var carousel = layui.carousel;
	var laypage = layui.laypage;
	var http = layui.http;
	var jquery = layui.jquery;
	var laydate = layui.laydate;

	var limit = 8;
    limit = 3 * 2;
	vue.baseurl = http.baseurl;
      // 获取轮播图 数据
      http.request('config/list', 'get', {
        page: 1,
        limit: 5
      }, function(res) {
        if (res.data.list.length > 0) {
          let swiperList = [];
          res.data.list.forEach(element => {
            if (element.value != null) {
              swiperList.push({
                img: http.baseurl+element.value
              });
            }
          });
          vue.swiperList = swiperList;

		  vue.$nextTick(() => {
		    carousel.render({
		    	elem: '#test1',
		  				width: '100%',
		    	height: '450px',
		    	arrow: 'hover',
		    	anim: 'updown',
		    	autoplay: 'true',
		    	interval: '3000',
		    	indicator: 'inside'
		    });

		  });


          // vue.$nextTick(()=>{
          //   window.xznSlide();
          // });
        }
      });



      // 分页列表
      pageList();

      // 搜索按钮
      jquery('#btn-search').click(function(e) {
        pageList();
      });

		function pageList() {
			var param = {
				page: 1,
				limit: limit,
				yonghuzhanghao: adminName
			}


        if (jquery('#yishengxingming').val()) {
          param['yishengxingming'] = jquery('#yishengxingming').val() ? '%' + jquery('#yishengxingming').val() + '%' : '';
        }


        // 获取列表数据,根据userid
        http.request('zhenduanjilu/list', 'get', param, function(res) {
			console.log(adminName)
			vue.dataList = res.data.list
          // 分页
          laypage.render({
            elem: 'pager',
            count: res.data.total,
            limit: limit,
            groups: 5,
            layout: ["prev","page","next"],
            theme: '#2C73D5',
            jump: function(obj, first) {
            	param.page = obj.curr;
              //首次不执行
              if (!first) {
                http.request('zhenduanjilu/list', 'get', param, function(res) {
                  vue.dataList = res.data.list
                })
              }
            }
          });
        })
      }
    });

    window.xznSlide = function() {
      jQuery(".banner").slide({mainCell:".bd ul",autoPlay:true,interTime:5000});
      jQuery("#ifocus").slide({ titCell:"#ifocus_btn li", mainCell:"#ifocus_piclist ul",effect:"leftLoop", delayTime:200, autoPlay:true,triggerTime:0});
      jQuery("#ifocus").slide({ titCell:"#ifocus_btn li", mainCell:"#ifocus_tx ul",delayTime:0, autoPlay:true});
      jQuery(".product_list").slide({mainCell:".bd ul",autoPage:true,effect:"leftLoop",autoPlay:true,vis:5,trigger:"click",interTime:4000});
    };
  </script>
</body>
</html>
